<mat-toolbar style="display: flex; justify-content: space-between; align-items: center;">
    <div style="display: flex; align-items: center; gap: 10px; cursor: pointer;" (click)="router.navigate(['/'])">
        <mat-icon>movie</mat-icon>
        <h3>MovieRadar</h3>
    </div>

    <div class="menuButtons">
        <div class="searchContainer">
            <div class="searchField">
                <mat-icon matPrefix>search</mat-icon>
                <input 
                    matInput
                    placeholder="Pesquisar filme..."
                    [(ngModel)]="query"
                    (input)="onSearchChange()"
                    (focus)="inputFocused = true"
                    (blur)="onInputBlur()"
                >
                <button
                    *ngIf="query"
                    aria-label="Limpar pesquisa"
                    (click)="clearSearch()"
                >
                    <mat-icon >close</mat-icon>
                </button>
            </div>

            <div class="search-results" *ngIf="searchResults.length && inputFocused">
                <div 
                    class="search-item"
                    *ngFor="let movie of searchResults"
                    (click)="router.navigate(['/filme', movie.id])"
                >
                     <img [src]="'https://image.tmdb.org/t/p/w92' + movie.poster_path" alt="Poster" />
                    <div class="movie-info">
                        <span>{{ movie.title }}</span>
                        <p>
                            <span class="movie-rating">
                                <mat-icon>star</mat-icon>
                                {{ movie.vote_average | number : "1.1-1" }}
                            </span>
                            <!-- Ano de lançamento -->
                            <span>{{ movie.release_date | date: 'yyyy' }}</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <button 
            mat-button
            [routerLink]="'/'"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }"
        >
            <mat-icon>account_circle</mat-icon>
            Início
        </button>
        <button 
            mat-button
            [routerLink]="'/favoritos'"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }"
        >
            <mat-icon>favorite</mat-icon>
            Favoritos
        </button>
    </div>
</mat-toolbar>